<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Demo - Template Blog Truyện</title>
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Crimson+Text:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">

    <!-- Image fixes CSS -->
    <link href="assets/css/image-fixes.css" rel="stylesheet">

    <!-- Navigation JavaScript -->
    <script src="assets/js/navigation.js"></script>
    
    <!-- Inline CSS - Tích hợp trực tiếp để demo hoạt động -->
    <style>
        /* CSS Variables */
        :root {
            --primary-color: #2563eb;
            --primary-hover: #1d4ed8;
            --secondary-color: #64748b;
            --accent-color: #f59e0b;
            --success-color: #10b981;
            --warning-color: #f59e0b;
            --error-color: #ef4444;

            --bg-color: #ffffff;
            --surface-color: #f8fafc;
            --surface-hover: #f1f5f9;
            --text-primary: #1e293b;
            --text-secondary: #64748b;
            --text-muted: #94a3b8;
            --border-color: #e2e8f0;
            --border-hover: #cbd5e1;

            --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
            --shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);

            --font-sans: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            --font-serif: 'Crimson Text', Georgia, 'Times New Roman', serif;

            --font-size-xs: 0.75rem;
            --font-size-sm: 0.875rem;
            --font-size-base: 1rem;
            --font-size-lg: 1.125rem;
            --font-size-xl: 1.25rem;
            --font-size-2xl: 1.5rem;
            --font-size-3xl: 1.875rem;
            --font-size-4xl: 2.25rem;

            --line-height-tight: 1.25;
            --line-height-normal: 1.5;
            --line-height-relaxed: 1.625;

            --space-1: 0.25rem;
            --space-2: 0.5rem;
            --space-3: 0.75rem;
            --space-4: 1rem;
            --space-5: 1.25rem;
            --space-6: 1.5rem;
            --space-8: 2rem;
            --space-10: 2.5rem;
            --space-12: 3rem;
            --space-16: 4rem;

            --container-max-width: 1200px;
            --content-max-width: 800px;
            --sidebar-width: 320px;
            --header-height: 80px;

            --radius-sm: 0.25rem;
            --radius: 0.375rem;
            --radius-md: 0.5rem;
            --radius-lg: 0.75rem;
            --radius-xl: 1rem;

            --transition-fast: 0.15s ease;
            --transition-normal: 0.3s ease;
            --transition-slow: 0.5s ease;
        }

        [data-theme="dark"] {
            --bg-color: #0f172a;
            --surface-color: #1e293b;
            --surface-hover: #334155;
            --text-primary: #f1f5f9;
            --text-secondary: #cbd5e1;
            --text-muted: #94a3b8;
            --border-color: #334155;
            --border-hover: #475569;

            --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.3);
            --shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.4), 0 1px 2px 0 rgba(0, 0, 0, 0.3);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.4), 0 2px 4px -1px rgba(0, 0, 0, 0.3);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.4), 0 4px 6px -2px rgba(0, 0, 0, 0.3);
        }

        /* Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
            font-size: 16px;
        }

        body {
            font-family: var(--font-sans);
            font-size: var(--font-size-base);
            line-height: var(--line-height-normal);
            color: var(--text-primary);
            background-color: var(--bg-color);
            transition: background-color var(--transition-normal), color var(--transition-normal);
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        /* Typography */
        h1, h2, h3, h4, h5, h6 {
            font-weight: 600;
            line-height: var(--line-height-tight);
            color: var(--text-primary);
            margin-bottom: var(--space-4);
        }

        h1 { font-size: var(--font-size-3xl); }
        h2 { font-size: var(--font-size-2xl); }
        h3 { font-size: var(--font-size-xl); }
        h4 { font-size: var(--font-size-lg); }

        p {
            margin-bottom: var(--space-4);
            color: var(--text-secondary);
        }

        a {
            color: var(--primary-color);
            text-decoration: none;
            transition: color var(--transition-fast);
        }

        a:hover {
            color: var(--primary-hover);
        }

        /* Layout */
        .container {
            max-width: var(--container-max-width);
            margin: 0 auto;
            padding: 0 var(--space-4);
        }

        /* Header */
        .header {
            background-color: var(--surface-color);
            border-bottom: 1px solid var(--border-color);
            position: sticky;
            top: 0;
            z-index: 100;
            backdrop-filter: blur(10px);
            transition: all var(--transition-normal);
        }

        .header-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: var(--space-4) 0;
            min-height: var(--header-height);
        }

        .logo {
            font-size: var(--font-size-2xl);
            font-weight: 700;
            color: var(--primary-color);
            text-decoration: none;
            transition: color var(--transition-fast);
        }

        .logo:hover {
            color: var(--primary-hover);
        }

        .nav-menu {
            display: flex;
            list-style: none;
            gap: var(--space-6);
            align-items: center;
        }

        .nav-menu a {
            color: var(--text-primary);
            font-weight: 500;
            padding: var(--space-2) var(--space-3);
            border-radius: var(--radius);
            transition: all var(--transition-fast);
        }

        .nav-menu a:hover {
            color: var(--primary-color);
            background-color: var(--surface-hover);
        }

        /* Dropdown menu styles */
        .dropdown {
            position: relative;
        }

        .dropdown-toggle {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .dropdown-menu {
            position: absolute;
            top: 100%;
            left: 0;
            background: var(--surface-color);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-md);
            box-shadow: var(--shadow-lg);
            min-width: 200px;
            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px);
            transition: all var(--transition-normal);
            z-index: 1000;
        }

        .dropdown:hover .dropdown-menu {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        .dropdown-menu li {
            list-style: none;
        }

        .dropdown-menu a {
            display: block;
            padding: var(--space-3) var(--space-4);
            color: var(--text-primary);
            text-decoration: none;
            transition: background-color var(--transition-fast);
        }

        .dropdown-menu a:hover {
            background: var(--primary-color);
            color: white;
        }

        .theme-toggle {
            background: var(--surface-color);
            border: 1px solid var(--border-color);
            color: var(--text-primary);
            padding: var(--space-2) var(--space-3);
            border-radius: var(--radius);
            cursor: pointer;
            transition: all var(--transition-fast);
            display: flex;
            align-items: center;
            gap: var(--space-2);
        }

        .theme-toggle:hover {
            background-color: var(--surface-hover);
            border-color: var(--border-hover);
        }

        /* Main Layout */
        .main-content {
            display: grid;
            grid-template-columns: 1fr var(--sidebar-width);
            gap: var(--space-8);
            padding: var(--space-8) 0;
            min-height: calc(100vh - var(--header-height) - 200px);
        }

        .content {
            min-width: 0;
        }

        /* Search Section */
        .search-section {
            margin-bottom: var(--space-8);
        }

        .search-box {
            display: flex;
            max-width: 600px;
            margin: 0 auto;
            background: var(--surface-color);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-lg);
            overflow: hidden;
            box-shadow: var(--shadow);
        }

        .search-input {
            flex: 1;
            padding: var(--space-4);
            border: none;
            background: transparent;
            color: var(--text-primary);
            font-size: var(--font-size-base);
            outline: none;
        }

        .search-input::placeholder {
            color: var(--text-muted);
        }

        .search-btn {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: var(--space-4) var(--space-6);
            cursor: pointer;
            transition: background-color var(--transition-fast);
        }

        .search-btn:hover {
            background: var(--primary-hover);
        }

        /* Section Titles */
        .section-title {
            display: flex;
            align-items: center;
            gap: var(--space-3);
            font-size: var(--font-size-xl);
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: var(--space-4);
            padding-bottom: var(--space-3);
            border-bottom: 2px solid var(--primary-color);
        }

        .section-title i {
            color: var(--primary-color);
        }

        /* Stories Grid */
        .stories-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: var(--space-6);
            margin-bottom: var(--space-8);
        }

        .story-card {
            background: var(--surface-color);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-lg);
            overflow: hidden;
            transition: all var(--transition-normal);
            box-shadow: var(--shadow);
        }

        .story-card:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
            border-color: var(--border-hover);
        }

        .story-thumbnail {
            position: relative;
            aspect-ratio: 3/4;
            overflow: hidden;
        }

        .story-thumbnail img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform var(--transition-normal);
        }

        .story-card:hover .story-thumbnail img {
            transform: scale(1.05);
        }

        .story-overlay {
            position: absolute;
            top: var(--space-2);
            right: var(--space-2);
        }

        .status-badge {
            background: var(--primary-color);
            color: white;
            padding: var(--space-1) var(--space-2);
            border-radius: var(--radius-sm);
            font-size: var(--font-size-xs);
            font-weight: 500;
            margin-left: var(--space-1);
        }

        .story-info {
            padding: var(--space-4);
        }

        .story-title {
            font-size: var(--font-size-lg);
            font-weight: 600;
            margin-bottom: var(--space-2);
            line-height: var(--line-height-tight);
        }

        .story-title a {
            color: var(--text-primary);
            text-decoration: none;
            transition: color var(--transition-fast);
        }

        .story-title a:hover {
            color: var(--primary-color);
        }

        .story-author {
            font-size: var(--font-size-sm);
            color: var(--text-muted);
            margin-bottom: var(--space-3);
            display: flex;
            align-items: center;
            gap: var(--space-2);
        }

        .story-excerpt {
            font-size: var(--font-size-sm);
            color: var(--text-secondary);
            line-height: var(--line-height-relaxed);
            margin-bottom: var(--space-4);
            display: -webkit-box;
            -webkit-line-clamp: 3;
            line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .story-meta {
            display: flex;
            flex-wrap: wrap;
            gap: var(--space-3);
            margin-bottom: var(--space-4);
            font-size: var(--font-size-xs);
            color: var(--text-muted);
        }

        .story-meta span {
            display: flex;
            align-items: center;
            gap: var(--space-1);
        }

        .chapter-count .chapter-number {
            background: var(--primary-color);
            color: white;
            padding: 2px var(--space-1);
            border-radius: var(--radius-sm);
            font-weight: 500;
        }

        .story-actions {
            display: flex;
            gap: var(--space-2);
            align-items: center;
        }

        .read-btn {
            flex: 1;
            background: var(--primary-color);
            color: white;
            padding: var(--space-2) var(--space-4);
            border-radius: var(--radius);
            text-decoration: none;
            font-weight: 500;
            text-align: center;
            transition: all var(--transition-fast);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: var(--space-2);
        }

        .read-btn:hover {
            background: var(--primary-hover);
            transform: translateY(-1px);
        }

        .bookmark-btn {
            background: var(--surface-hover);
            border: 1px solid var(--border-color);
            color: var(--text-secondary);
            padding: var(--space-2);
            border-radius: var(--radius);
            cursor: pointer;
            transition: all var(--transition-fast);
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .bookmark-btn:hover {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        /* Sidebar */
        .sidebar {
            display: flex;
            flex-direction: column;
            gap: var(--space-6);
        }

        .widget {
            background: var(--surface-color);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-lg);
            padding: var(--space-6);
            box-shadow: var(--shadow);
        }

        .widget-title {
            font-size: var(--font-size-lg);
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: var(--space-4);
            padding-bottom: var(--space-3);
            border-bottom: 2px solid var(--primary-color);
            display: flex;
            align-items: center;
            gap: var(--space-2);
        }

        .widget-title i {
            color: var(--primary-color);
        }

        /* Popular List */
        .popular-list {
            display: flex;
            flex-direction: column;
            gap: var(--space-3);
        }

        .popular-item {
            display: flex;
            align-items: center;
            gap: var(--space-3);
            padding: var(--space-3);
            background: var(--bg-color);
            border-radius: var(--radius);
            transition: all var(--transition-fast);
        }

        .popular-item:hover {
            background: var(--surface-hover);
        }

        .popular-rank {
            width: 24px;
            height: 24px;
            background: var(--primary-color);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: var(--font-size-sm);
            font-weight: 600;
            flex-shrink: 0;
        }

        .popular-info {
            flex: 1;
            min-width: 0;
        }

        .popular-title {
            font-size: var(--font-size-sm);
            font-weight: 500;
            margin-bottom: var(--space-1);
        }

        .popular-title a {
            color: var(--text-primary);
            text-decoration: none;
        }

        .popular-title a:hover {
            color: var(--primary-color);
        }

        .popular-meta {
            font-size: var(--font-size-xs);
            color: var(--text-muted);
        }

        /* Categories */
        .categories-list {
            display: flex;
            flex-wrap: wrap;
            gap: var(--space-2);
        }

        .category-tag {
            background: var(--surface-hover);
            color: var(--text-secondary);
            padding: var(--space-2) var(--space-3);
            border-radius: var(--radius);
            font-size: var(--font-size-sm);
            text-decoration: none;
            transition: all var(--transition-fast);
            border: 1px solid var(--border-color);
        }

        .category-tag:hover {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        .category-count {
            opacity: 0.7;
        }

        /* Reader Styles */
        .reader-container {
            max-width: var(--content-max-width);
            margin: 0 auto;
            padding: var(--space-6) var(--space-4);
        }

        .breadcrumb {
            display: flex;
            align-items: center;
            gap: var(--space-2);
            margin-bottom: var(--space-6);
            padding: var(--space-3) var(--space-4);
            background: var(--surface-color);
            border-radius: var(--radius);
            font-size: var(--font-size-sm);
            color: var(--text-secondary);
        }

        .breadcrumb a {
            color: var(--primary-color);
            text-decoration: none;
        }

        .breadcrumb-separator {
            color: var(--text-muted);
        }

        .chapter-header {
            text-align: center;
            margin-bottom: var(--space-8);
            padding-bottom: var(--space-6);
            border-bottom: 2px solid var(--border-color);
        }

        .chapter-title {
            font-size: var(--font-size-3xl);
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: var(--space-4);
            line-height: var(--line-height-tight);
        }

        .chapter-meta {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: var(--space-4);
            font-size: var(--font-size-sm);
            color: var(--text-secondary);
            flex-wrap: wrap;
        }

        .story-title-link {
            color: var(--primary-color);
            text-decoration: none;
            font-weight: 500;
        }

        .meta-separator {
            color: var(--text-muted);
        }

        .reader-controls {
            background: var(--surface-color);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-lg);
            padding: var(--space-4);
            margin-bottom: var(--space-6);
            box-shadow: var(--shadow);
        }

        .controls-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: var(--space-4);
            flex-wrap: wrap;
        }

        .font-controls {
            display: flex;
            align-items: center;
            gap: var(--space-3);
        }

        .font-size-label {
            font-size: var(--font-size-sm);
            color: var(--text-secondary);
            font-weight: 500;
        }

        .font-size-btn {
            background: var(--surface-hover);
            border: 1px solid var(--border-color);
            color: var(--text-primary);
            padding: var(--space-2) var(--space-3);
            border-radius: var(--radius);
            cursor: pointer;
            font-size: var(--font-size-sm);
            font-weight: 500;
            transition: all var(--transition-fast);
            min-width: 40px;
        }

        .font-size-btn:hover,
        .font-size-btn.active {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        .reading-mode-toggle {
            background: var(--surface-hover);
            border: 1px solid var(--border-color);
            color: var(--text-primary);
            padding: var(--space-2) var(--space-4);
            border-radius: var(--radius);
            cursor: pointer;
            font-size: var(--font-size-sm);
            font-weight: 500;
            transition: all var(--transition-fast);
            display: flex;
            align-items: center;
            gap: var(--space-2);
        }

        .reading-mode-toggle:hover {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        .chapter-content {
            font-family: var(--font-serif);
            font-size: var(--font-size-lg);
            line-height: var(--line-height-relaxed);
            color: var(--text-primary);
            margin-bottom: var(--space-12);
        }

        .chapter-content.font-small {
            font-size: var(--font-size-base);
        }

        .chapter-content.font-medium {
            font-size: var(--font-size-lg);
        }

        .chapter-content.font-large {
            font-size: var(--font-size-xl);
        }

        .chapter-content p {
            margin-bottom: var(--space-6);
            text-align: justify;
            text-indent: 2em;
        }

        .chapter-content p:first-child {
            text-indent: 0;
        }

        /* Chapter Header Styles */
        .chapter-header {
            margin-bottom: var(--space-8);
            padding-bottom: var(--space-6);
            border-bottom: 2px solid var(--border-color);
        }

        .chapter-header h2 {
            font-size: var(--font-size-2xl);
            font-weight: 700;
            color: var(--primary-color);
            margin-bottom: var(--space-4);
            line-height: var(--line-height-tight);
        }

        .chapter-meta {
            display: flex;
            flex-direction: column;
            gap: var(--space-2);
            font-size: var(--font-size-sm);
            color: var(--text-muted);
        }

        .story-title {
            font-weight: 600;
            color: var(--text-secondary);
        }

        .chapter-info {
            display: flex;
            gap: var(--space-4);
        }

        .chapter-text {
            font-family: var(--font-serif);
            line-height: var(--line-height-relaxed);
        }

        .chapter-text p {
            margin-bottom: var(--space-6);
            text-align: justify;
            text-indent: 2em;
        }

        .chapter-text p:first-child {
            text-indent: 0;
        }

        .chapter-navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: var(--space-4);
            margin: var(--space-8) 0;
            padding: var(--space-6);
            background: var(--surface-color);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow);
            flex-wrap: wrap;
        }

        .nav-btn {
            display: flex;
            align-items: center;
            gap: var(--space-2);
            padding: var(--space-3) var(--space-6);
            background: var(--primary-color);
            color: white;
            text-decoration: none;
            border: none;
            border-radius: var(--radius);
            font-weight: 500;
            transition: all var(--transition-fast);
            cursor: pointer;
            min-height: 44px;
        }

        .nav-btn:hover:not(:disabled) {
            background: var(--primary-hover);
            transform: translateY(-1px);
            box-shadow: var(--shadow-md);
        }

        .nav-btn:disabled {
            background: var(--text-muted);
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .nav-btn.secondary {
            background: var(--surface-hover);
            color: var(--text-primary);
            border: 1px solid var(--border-color);
        }

        .nav-btn.secondary:hover {
            background: var(--surface-color);
            border-color: var(--border-hover);
        }

        .back-to-top {
            position: fixed;
            bottom: var(--space-6);
            right: var(--space-6);
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: var(--shadow-lg);
            transition: all var(--transition-normal);
            opacity: 0;
            visibility: hidden;
            z-index: 100;
        }

        .back-to-top.visible {
            opacity: 1;
            visibility: visible;
        }

        .back-to-top:hover {
            background: var(--primary-hover);
            transform: translateY(-2px);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
                gap: var(--space-6);
                padding: var(--space-6) 0;
            }

            .sidebar {
                order: -1;
            }

            .stories-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: var(--space-4);
            }

            .header-content {
                flex-wrap: wrap;
                gap: var(--space-3);
            }

            .nav-menu {
                gap: var(--space-4);
            }

            .nav-menu a {
                padding: var(--space-2);
                font-size: var(--font-size-sm);
            }

            .chapter-title {
                font-size: var(--font-size-2xl);
            }

            .chapter-meta {
                flex-direction: column;
                gap: var(--space-2);
            }

            .controls-row {
                flex-direction: column;
                gap: var(--space-3);
            }

            .chapter-navigation {
                flex-direction: column;
                gap: var(--space-3);
            }

            .nav-btn {
                width: 100%;
                justify-content: center;
            }

            /* Story detail responsive */
            .story-info-section {
                grid-template-columns: 1fr;
                gap: var(--space-4);
                text-align: center;
            }

            .story-cover {
                max-width: 250px;
                margin: 0 auto;
            }

            .story-actions {
                justify-content: center;
            }

            .chapter-item {
                flex-direction: column;
                text-align: center;
                gap: var(--space-3);
            }
        }

        @media (max-width: 480px) {
            .stories-grid {
                grid-template-columns: 1fr;
            }

            .story-card {
                display: flex;
                flex-direction: row;
                height: 140px;
            }

            .story-thumbnail {
                width: 100px;
                flex-shrink: 0;
            }

            .story-info {
                flex: 1;
                padding: var(--space-3);
                display: flex;
                flex-direction: column;
                justify-content: space-between;
            }

            .story-title {
                font-size: var(--font-size-sm);
                margin-bottom: var(--space-1);
            }

            .story-excerpt {
                font-size: var(--font-size-xs);
                -webkit-line-clamp: 2;
                line-clamp: 2;
                margin-bottom: var(--space-2);
            }

            .nav-menu {
                display: none;
            }

            .chapter-content p {
                text-indent: 1em;
                margin-bottom: var(--space-4);
            }
        }

        /* Story Detail Page Styles */
        .story-detail-page {
            max-width: var(--container-max-width);
            margin: 0 auto;
            padding: var(--space-6) var(--space-4);
        }

        .story-info-section {
            display: grid;
            grid-template-columns: 300px 1fr;
            gap: var(--space-8);
            margin-bottom: var(--space-8);
            padding: var(--space-6);
            background: var(--surface-color);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow);
        }

        .story-cover {
            position: relative;
            aspect-ratio: 3/4;
            border-radius: var(--radius-lg);
            overflow: hidden;
            box-shadow: var(--shadow-md);
        }

        .cover-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .cover-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(transparent, rgba(0, 0, 0, 0.8));
            padding: var(--space-4);
            color: white;
        }

        .rating-stars {
            display: flex;
            align-items: center;
            gap: var(--space-1);
            font-size: var(--font-size-sm);
        }

        .rating-stars i {
            color: #fbbf24;
        }

        .rating-text {
            margin-left: var(--space-2);
            font-size: var(--font-size-xs);
        }

        .story-details {
            display: flex;
            flex-direction: column;
            gap: var(--space-4);
        }

        .story-meta {
            display: flex;
            flex-direction: column;
            gap: var(--space-3);
        }

        .meta-item {
            display: flex;
            align-items: center;
            gap: var(--space-3);
            font-size: var(--font-size-sm);
        }

        .meta-item i {
            color: var(--primary-color);
            width: 16px;
            text-align: center;
        }

        .meta-label {
            color: var(--text-secondary);
            font-weight: 500;
            min-width: 80px;
        }

        .meta-value {
            color: var(--text-primary);
        }

        .author-link {
            color: var(--primary-color);
            text-decoration: none;
            font-weight: 500;
        }

        .genre-tags {
            display: flex;
            flex-wrap: wrap;
            gap: var(--space-2);
        }

        .genre-tag {
            background: var(--primary-color);
            color: white;
            padding: var(--space-1) var(--space-2);
            border-radius: var(--radius-sm);
            font-size: var(--font-size-xs);
            text-decoration: none;
        }

        .status-ongoing {
            color: var(--success-color);
            font-weight: 600;
        }

        .story-actions {
            display: flex;
            flex-wrap: wrap;
            gap: var(--space-3);
            margin-top: var(--space-4);
        }

        .action-btn {
            display: flex;
            align-items: center;
            gap: var(--space-2);
            padding: var(--space-3) var(--space-6);
            border-radius: var(--radius);
            font-weight: 500;
            text-decoration: none;
            border: none;
            cursor: pointer;
            transition: all var(--transition-fast);
            min-height: 44px;
        }

        .action-btn.primary {
            background: var(--primary-color);
            color: white;
        }

        .action-btn.secondary {
            background: var(--accent-color);
            color: white;
        }

        .action-btn.outline {
            background: transparent;
            color: var(--text-primary);
            border: 1px solid var(--border-color);
        }

        .action-btn:hover {
            transform: translateY(-1px);
            box-shadow: var(--shadow-md);
        }

        .story-description {
            margin-bottom: var(--space-8);
            padding: var(--space-6);
            background: var(--surface-color);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow);
        }

        .description-text p {
            color: var(--text-secondary);
            line-height: var(--line-height-relaxed);
        }

        .chapter-list-section {
            margin-bottom: var(--space-8);
            padding: var(--space-6);
            background: var(--surface-color);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow);
        }

        .section-header {
            margin-bottom: var(--space-6);
        }

        .chapter-count {
            color: var(--text-muted);
            font-weight: 400;
            font-size: var(--font-size-base);
        }

        .chapter-list {
            display: flex;
            flex-direction: column;
            gap: var(--space-3);
        }

        .chapter-item {
            display: flex;
            align-items: center;
            gap: var(--space-4);
            padding: var(--space-4);
            background: var(--bg-color);
            border: 1px solid var(--border-color);
            border-radius: var(--radius);
            transition: all var(--transition-fast);
        }

        .chapter-item:hover {
            background: var(--surface-hover);
            transform: translateX(4px);
        }

        .chapter-number {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            background: var(--primary-color);
            color: white;
            border-radius: 50%;
            font-weight: 600;
            font-size: var(--font-size-sm);
            flex-shrink: 0;
        }

        .chapter-info {
            flex: 1;
            min-width: 0;
        }

        .chapter-title {
            margin: 0;
            font-size: var(--font-size-base);
            font-weight: 500;
        }

        .chapter-title a {
            color: var(--text-primary);
            text-decoration: none;
        }

        .chapter-title a:hover {
            color: var(--primary-color);
        }

        .chapter-meta {
            display: flex;
            gap: var(--space-4);
            margin-top: var(--space-1);
            font-size: var(--font-size-xs);
            color: var(--text-muted);
        }

        .chapter-status {
            flex-shrink: 0;
        }

        .read-status {
            font-size: var(--font-size-lg);
            color: var(--text-muted);
        }

        .read-status.fas {
            color: var(--success-color);
        }

        /* Audio Player Styles */
        .audio-player-container {
            background: #232c36;
            border-radius: var(--radius-lg);
            padding: var(--space-6);
            margin: var(--space-6) 0;
            box-shadow: var(--shadow);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: white;
        }

        .audio-player {
            max-width: 100%;
        }

        /* Audio Information */
        .audio-info {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: var(--space-5);
        }

        .audio-title {
            flex: 1;
        }

        .track-title {
            font-size: var(--font-size-lg);
            font-weight: var(--font-weight-bold);
            color: white;
            margin: 0 0 var(--space-1) 0;
        }

        .track-subtitle {
            font-size: var(--font-size-sm);
            color: rgba(255, 255, 255, 0.7);
            margin: 0;
        }

        .audio-duration {
            display: flex;
            align-items: center;
            gap: var(--space-1);
            font-size: var(--font-size-sm);
            color: rgba(255, 255, 255, 0.8);
            font-family: 'Courier New', monospace;
        }

        /* Progress Bar */
        .progress-container {
            margin-bottom: var(--space-5);
        }

        .progress-bar {
            position: relative;
            height: 6px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 3px;
            cursor: pointer;
            transition: height 0.2s ease;
        }

        .progress-bar:hover {
            height: 8px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            border-radius: 3px;
            width: 0%;
            transition: width 0.1s ease;
        }

        .progress-handle {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            width: 16px;
            height: 16px;
            background: white;
            border-radius: 50%;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
            left: 0%;
            opacity: 0;
            transition: opacity 0.2s ease;
            cursor: pointer;
        }

        .progress-bar:hover .progress-handle {
            opacity: 1;
        }

        /* Audio Controls */
        .audio-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: var(--space-4);
        }

        .primary-controls {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: var(--space-3);
            flex: 1;
        }

        .secondary-controls {
            display: flex;
            align-items: center;
            gap: var(--space-3);
        }

        .control-btn {
            background: transparent;
            border: none;
            color: rgba(255, 255, 255, 0.8);
            cursor: pointer;
            padding: var(--space-2);
            border-radius: var(--radius-md);
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            min-width: 40px;
            height: 40px;
        }



        .control-btn:hover {
            color: white;
            background: rgba(255, 255, 255, 0.1);
            transform: scale(1.05);
        }

        .previous-btn {
            margin-left: 200px;
        }

        .play-pause-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            width: 56px;
            height: 56px;
            border-radius: 50%;
            font-size: var(--font-size-lg);
        }

        .play-pause-btn:hover {
            background: linear-gradient(135deg, #5a6fd8 0%, #6a4190 100%);
            transform: scale(1.1);
        }

        /* Volume Control */
        .volume-control {
            display: flex;
            align-items: center;
            gap: var(--space-2);
            position: relative;
        }

        .volume-slider-container {
            width: 80px;
            opacity: 0;
            transform: translateX(-10px);
            transition: all 0.3s ease;
            pointer-events: none;
        }

        .volume-control:hover .volume-slider-container {
            opacity: 1;
            transform: translateX(0);
            pointer-events: all;
        }

        .volume-slider {
            width: 100%;
            height: 4px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 2px;
            outline: none;
            cursor: pointer;
            -webkit-appearance: none;
        }

        .volume-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 14px;
            height: 14px;
            background: white;
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        /* Speed Control */
        .speed-control {
            position: relative;
        }

        .speed-btn {
            min-width: 48px;
        }

        .speed-text {
            font-size: var(--font-size-sm);
            font-weight: var(--font-weight-medium);
        }

        .speed-menu {
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            background: #1a2128;
            border-radius: var(--radius-md);
            padding: var(--space-2);
            margin-bottom: var(--space-2);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            opacity: 0;
            visibility: hidden;
            transition: all 0.2s ease;
            z-index: 10;
        }

        .speed-control:hover .speed-menu {
            opacity: 1;
            visibility: visible;
        }

        .speed-option {
            display: block;
            width: 100%;
            padding: var(--space-2) var(--space-3);
            background: transparent;
            border: none;
            color: rgba(255, 255, 255, 0.8);
            cursor: pointer;
            border-radius: var(--radius-sm);
            font-size: var(--font-size-sm);
            transition: all 0.2s ease;
        }

        .speed-option:hover,
        .speed-option.active {
            background: rgba(255, 255, 255, 0.1);
            color: white;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .audio-player-container {
                padding: var(--space-4);
                margin: var(--space-4) 0;
            }

            .audio-info {
                flex-direction: column;
                gap: var(--space-2);
                align-items: flex-start;
            }

            .audio-controls {
                flex-direction: column;
                gap: var(--space-4);
            }

            .primary-controls {
                order: 1;
                justify-content: center;
                width: 100%;
            }

            .secondary-controls {
                order: 2;
                justify-content: center;
                width: 100%;
            }

            .volume-slider-container {
                opacity: 1;
                transform: translateX(0);
                pointer-events: all;
            }

            .speed-menu {
                position: fixed;
                bottom: auto;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
            }

            /* Mobile responsive adjustments */
            .primary-controls {
                justify-content: center;
                width: 100%;
            }

            /* Reset previous button margin on mobile */
            .previous-btn {
                margin-left: 0;
            }
        }

        /* Demo specific styles */
        .demo-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 2rem 0;
            text-align: center;
            margin-bottom: 2rem;
        }
        

        
        .demo-section {
            display: none;
            margin-bottom: 3rem;
        }
        
        .demo-section.active {
            display: block;
        }
        
        .demo-info {
            background: var(--surface-color);
            padding: 1.5rem;
            border-radius: 8px;
            margin-bottom: 2rem;
            border-left: 4px solid var(--primary-color);
        }
    </style>
</head>
<body data-theme="light">
    <!-- Demo Header -->
    <div class="demo-header">
        <div class="container">
            <button class="theme-toggle" onclick="toggleTheme()" style="margin-top: 1rem;">
                <i class="fas fa-moon"></i> Toggle Dark Mode
            </button>
        </div>
    </div>

    <div class="container">


        <!-- Homepage Demo -->
        <div id="homepage" class="demo-section active">
            <div class="demo-info">
                <h2><i class="fas fa-home"></i> Trang chủ</h2>
                <p>Giao diện trang chủ với grid truyện, search, sidebar và các widget.</p>
            </div>

            <!-- Header -->
            <header class="header">
                <div class="container">
                    <div class="header-content">
                        <a class="logo" href="#">📚 Blog Truyện</a>
                        <nav>
                            <ul class="nav-menu">
                                <li><a href="#" onclick="showSection('homepage'); return false;">Trang chủ</a></li>
                                <li class="dropdown">
                                    <a href="#" class="dropdown-toggle">Thể loại <i class="fas fa-chevron-down"></i></a>
                                    <ul class="dropdown-menu">
                                        <li><a href="#" onclick="StoryNavigation.goToCategory('Ngôn tình'); return false;">Ngôn tình</a></li>
                                        <li><a href="#" onclick="StoryNavigation.goToCategory('Kiếm hiệp'); return false;">Kiếm hiệp</a></li>
                                        <li><a href="#" onclick="StoryNavigation.goToCategory('Trinh thám'); return false;">Trinh thám</a></li>
                                        <li><a href="#" onclick="StoryNavigation.goToCategory('Teen'); return false;">Teen</a></li>
                                        <li><a href="#" onclick="StoryNavigation.goToCategory('Cổ trang'); return false;">Cổ trang</a></li>
                                    </ul>
                                </li>
                                <li class="dropdown">
                                    <a href="#" class="dropdown-toggle">Trạng thái <i class="fas fa-chevron-down"></i></a>
                                    <ul class="dropdown-menu">
                                        <li><a href="#" onclick="filterByStatus('completed'); return false;">Truyện hoàn thành</a></li>
                                        <li><a href="#" onclick="filterByStatus('updating'); return false;">Truyện đang cập nhật</a></li>
                                        <li><a href="#" onclick="showFeaturedStories(); return false;">Truyện nổi bật</a></li>
                                    </ul>
                                </li>
                                <li class="dropdown">
                                    <a href="#" class="dropdown-toggle">Demo <i class="fas fa-chevron-down"></i></a>
                                    <ul class="dropdown-menu">
                                        <li><a href="#" onclick="showSection('story-detail'); return false;">Chi tiết truyện</a></li>
                                        <li><a href="#" onclick="showSection('reader'); return false;">Đọc truyện</a></li>
                                        <li><a href="#" onclick="showSection('features'); return false;">Tính năng</a></li>
                                    </ul>
                                </li>
                                <li><a href="#contact">Liên hệ</a></li>
                            </ul>
                        </nav>
                        <button class="theme-toggle" onclick="toggleTheme()">
                            <i class="fas fa-moon"></i>
                        </button>
                    </div>
                </div>
            </header>

            <!-- Main Content -->
            <main class="container">
                <div class="main-content">
                    <!-- Content Area -->
                    <div class="content">
                        <!-- Search Section -->
                        <div class="search-section">
                            <div class="search-box">
                                <input type="text" placeholder="Tìm kiếm truyện, tác giả, thể loại..." class="search-input">
                                <button class="search-btn"><i class="fas fa-search"></i></button>
                            </div>
                        </div>

                        <!-- Latest Stories -->
                        <div class="latest-section">
                            <h2 class="section-title">
                                <i class="fas fa-clock"></i>
                                Cập nhật mới nhất
                            </h2>
                            <div class="stories-grid">
                                <!-- Stories will be populated by demo-data.js -->
                            </div>
                        </div>
                    </div>

                    <!-- Sidebar -->
                    <aside class="sidebar">
                        <!-- Search Widget -->
                        <div class="widget search-widget">
                            <h3 class="widget-title">
                                <i class="fas fa-search"></i>
                                Tìm kiếm truyện
                            </h3>
                            <div class="search-form">
                                <input type="text" placeholder="Nhập tên truyện..." class="search-input">
                                <button class="search-btn"><i class="fas fa-search"></i></button>
                            </div>
                        </div>

                        <!-- Popular Stories -->
                        <div class="widget popular-widget">
                            <h3 class="widget-title">
                                <i class="fas fa-fire"></i>
                                Truyện hot trong tuần
                            </h3>
                            <div class="popular-list">
                                <!-- Popular stories will be populated -->
                            </div>
                        </div>

                        <!-- Categories -->
                        <div class="widget categories-widget">
                            <h3 class="widget-title">
                                <i class="fas fa-tags"></i>
                                Thể loại truyện
                            </h3>
                            <div class="categories-list">
                                <!-- Categories will be populated -->
                            </div>
                        </div>
                    </aside>
                </div>
            </main>
        </div>

        <!-- Story Detail Demo -->
        <div id="story-detail" class="demo-section">
            <div class="demo-info">
                <h2><i class="fas fa-book"></i> Trang chi tiết truyện</h2>
                <p>Layout chi tiết truyện với thông tin đầy đủ, mô tả nội dung, và các tính năng tương tác.</p>
            </div>
            
            <div id="story-detail-content">
                <!-- Content will be loaded from story-detail.html -->
            </div>
        </div>

        <!-- Reader Demo -->
        <div id="reader" class="demo-section">
            <div class="demo-info">
                <h2><i class="fas fa-book-open"></i> Trang đọc truyện</h2>
                <p>Giao diện đọc truyện tối ưu với font controls, dark mode, và navigation.</p>
            </div>

            <div class="reader-container">
                <!-- Breadcrumb -->
                <nav class="breadcrumb">
                    <a href="#">Trang chủ</a>
                    <span class="breadcrumb-separator">/</span>
                    <a href="#" class="story-title-link">Tổng Giám Đốc Lạnh Lùng</a>
                    <span class="breadcrumb-separator">/</span>
                    <span class="current-chapter">Chương 1</span>
                </nav>

                <!-- Chapter Header -->
                <header class="chapter-header">
                    <h1 class="chapter-title">Chương 1: Cuộc gặp gỡ định mệnh</h1>
                    <div class="chapter-meta">
                        <a href="#" class="story-title-link">Tổng Giám Đốc Lạnh Lùng Và Cô Vợ Nhỏ</a>
                        <span class="meta-separator">•</span>
                        <span class="chapter-date">20/01/2024</span>
                        <span class="meta-separator">•</span>
                        <span class="reading-time">5 phút đọc</span>
                    </div>
                </header>

                <!-- Reader Controls -->
                <div class="reader-controls">
                    <div class="controls-row">
                        <div class="font-controls">
                            <span class="font-size-label">Cỡ chữ:</span>
                            <button class="font-size-btn" data-size="small">A-</button>
                            <button class="font-size-btn active" data-size="medium">A</button>
                            <button class="font-size-btn" data-size="large">A+</button>
                        </div>
                        <button class="reading-mode-toggle">
                            <i class="fas fa-book-open"></i>
                            <span>Chế độ đọc</span>
                        </button>
                    </div>
                </div>

                <!-- Chapter Content -->
                <div class="chapter-content font-medium">
                    <div class="chapter-header">
                        <h2>Chương 1: Cuộc gặp gỡ định mệnh</h2>
                        <div class="chapter-meta">
                            <span class="story-title">Tổng Giám Đốc Lạnh Lùng Và Cô Vợ Nhỏ</span>
                            <span class="chapter-info">1250 từ • 15/01/2024</span>
                        </div>
                    </div>
                    <div class="chapter-text">
                        <p>Sáng sớm tại thành phố Hồ Chí Minh, những tia nắng đầu tiên xuyên qua tấm rèm mỏng của căn phòng trọ nhỏ. Lâm Tiểu Hy thức dậy với tiếng chuông báo thức inh ỏi, đôi mắt vẫn còn mờ màng vì thiếu ngủ.</p>

                        <p>"Trời ơi, đã 7 giờ rồi!" Cô bật dậy, nhìn đồng hồ với vẻ hoảng hốt. Hôm nay là ngày quan trọng nhất trong sự nghiệp của cô - buổi thuyết trình trước khách hàng lớn nhất mà công ty từng có.</p>

                        <p>Cô vội vàng tắm rửa, thay bộ vest đen duy nhất trong tủ đồ. Đó là bộ đồ cô mua bằng tiền tiết kiệm cả tháng, hy vọng nó sẽ giúp cô trông chuyên nghiệp hơn.</p>

                        <p>Trên đường đi làm, Tiểu Hy ôm chặt chiếc cặp da cũ chứa những tài liệu quan trọng. Đây là dự án cô đã dành ba tháng để chuẩn bị, nếu thành công, cô sẽ được thăng chức và tăng lương.</p>

                        <p><em>Nội dung sẽ được load động từ chapters.json khi sử dụng navigation system...</em></p>
                    </div>
                </div>

                <!-- Chapter Navigation - Hidden for single chapter demo -->
                <!-- <nav class="chapter-navigation">
                    <button class="nav-btn prev-btn" onclick="navigateChapter('prev')" disabled title="Không có chương trước">
                        <i class="fas fa-chevron-left"></i>
                        Chương trước
                    </button>
                    <a class="nav-btn secondary list-btn" href="#" onclick="StoryNavigation.goToStory(1); return false;">
                        <i class="fas fa-list"></i>
                        Danh sách chương
                    </a>
                    <button class="nav-btn next-btn" onclick="navigateChapter('next')" disabled title="Không có chương sau">
                        Chương sau
                        <i class="fas fa-chevron-right"></i>
                    </button>
                </nav> -->
            </div>
        </div>

        <!-- Features Demo -->
        <div id="features" class="demo-section">
            <div class="demo-info">
                <h2><i class="fas fa-star"></i> Tính năng nổi bật</h2>
                <p>Các tính năng chính của template.</p>
            </div>

            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2rem;">
                <div class="widget">
                    <h3><i class="fas fa-mobile-alt"></i> Responsive Design</h3>
                    <p>Tương thích hoàn hảo trên mọi thiết bị: desktop, tablet, mobile.</p>
                </div>
                
                <div class="widget">
                    <h3><i class="fas fa-moon"></i> Dark/Light Mode</h3>
                    <p>Chế độ sáng/tối với toggle dễ sử dụng, lưu preference của user.</p>
                </div>
                
                <div class="widget">
                    <h3><i class="fas fa-search"></i> Tìm kiếm thông minh</h3>
                    <p>Search theo tên truyện, tác giả, thể loại với suggestions.</p>
                </div>
                
                <div class="widget">
                    <h3><i class="fas fa-font"></i> Font Controls</h3>
                    <p>Điều chỉnh cỡ chữ, font family cho trải nghiệm đọc tối ưu.</p>
                </div>
                
                <div class="widget">
                    <h3><i class="fas fa-rocket"></i> Performance</h3>
                    <p>Lazy loading, minified CSS/JS, CDN ready cho tốc độ cao.</p>
                </div>
                
                <div class="widget">
                    <h3><i class="fas fa-chart-line"></i> SEO Optimized</h3>
                    <p>Meta tags, Schema markup, sitemap tự động cho SEO tốt.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Back to Top -->
    <button class="back-to-top">
        <i class="fas fa-arrow-up"></i>
    </button>

    <!-- Inline JavaScript -->
    <script>
        // Demo Data (inline để tránh CORS)
        const demoData = {
            stories: [
                {
                    id: 1,
                    title: "Tổng Giám Đốc Lạnh Lùng Và Cô Vợ Nhỏ",
                    author: "Minh Nguyệt",
                    genre: ["Ngôn tình", "Hiện đại"],
                    status: "Đang cập nhật",
                    chapters: 25,
                    views: 15200,
                    rating: 4.5,
                    cover: "https://images.unsplash.com/photo-1573496359142-b8d87734a5a2?w=300&h=400&fit=crop&crop=face",
                    description: "Lâm Tiểu Hy, một cô gái bình thường, bất ngờ được sắp xếp kết hôn với Lý Hàn Thần - tổng giám đốc lạnh lùng và quyền lực nhất thành phố. Cuộc hôn nhân ban đầu chỉ là thỏa thuận, nhưng dần dần, tình yêu đã nảy sinh giữa hai người...",
                    featured: true,
                    lastUpdate: new Date('2024-01-20T10:30:00Z')
                },
                {
                    id: 2,
                    title: "Kiếm Thần Vô Song",
                    author: "Phong Hỏa Hí Chư Hầu",
                    genre: ["Kiếm hiệp", "Huyền huyễn"],
                    status: "Đang cập nhật",
                    chapters: 180,
                    views: 28500,
                    rating: 4.7,
                    cover: "https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=300&h=400&fit=crop",
                    description: "Trần Phong, một thiếu niên bình thường, tình cờ nhặt được một thanh kiếm cổ. Từ đó, cuộc đời anh thay đổi hoàn toàn. Với tài năng thiên phú và ý chí kiên cường, anh bước lên con đường tu luyện kiếm đạo...",
                    featured: true,
                    lastUpdate: new Date('2024-01-20T08:15:00Z')
                },
                {
                    id: 3,
                    title: "Thám Tử Conan Phiên Bản Việt",
                    author: "Thám Tử Nhỏ",
                    genre: ["Trinh thám", "Bí ẩn"],
                    status: "Hoàn thành",
                    chapters: 50,
                    views: 12800,
                    rating: 4.3,
                    cover: "https://images.unsplash.com/photo-1481627834876-b7833e8f5570?w=300&h=400&fit=crop",
                    description: "Nguyễn Minh Thám, một thám tử trẻ tuổi tài năng, luôn có khả năng giải quyết những vụ án phức tạp nhất. Cùng với đội ngũ cảnh sát, anh đã phá được nhiều vụ án gây chấn động...",
                    featured: false,
                    lastUpdate: new Date('2024-01-15T14:20:00Z')
                },
                {
                    id: 4,
                    title: "Tuổi 17 Của Em",
                    author: "Thanh Xuân",
                    genre: ["Teen", "Học đường"],
                    status: "Đang cập nhật",
                    chapters: 35,
                    views: 9600,
                    rating: 4.2,
                    cover: "https://images.unsplash.com/photo-1544717297-fa95b6ee9643?w=300&h=400&fit=crop&crop=face",
                    description: "Câu chuyện về tình yêu tuổi học trò trong sáng của Linh và Minh. Từ những ngày đầu gặp gỡ trong lớp học, đến những kỷ niệm ngọt ngào ở sân trường...",
                    featured: false,
                    lastUpdate: new Date('2024-01-19T16:45:00Z')
                },
                {
                    id: 5,
                    title: "Hoàng Hậu Của Ta",
                    author: "Cổ Phong",
                    genre: ["Cổ trang", "Cung đấu"],
                    status: "Đang cập nhật",
                    chapters: 68,
                    views: 18700,
                    rating: 4.6,
                    cover: "https://images.unsplash.com/photo-1594736797933-d0401ba2fe65?w=300&h=400&fit=crop&crop=face",
                    description: "Trong cung đình phong kiến, Lý Thanh Vũ từ một cô gái thường dân đã trở thành hoàng hậu quyền lực. Giữa những âm mưu cung đấu, tranh giành quyền lực...",
                    featured: true,
                    lastUpdate: new Date('2024-01-20T12:00:00Z')
                },
                {
                    id: 6,
                    title: "Nữ Thần Học Đường",
                    author: "Ánh Dương",
                    genre: ["Teen", "Hài hước"],
                    status: "Hoàn thành",
                    chapters: 42,
                    views: 11200,
                    rating: 4.1,
                    cover: "https://images.unsplash.com/photo-1494790108755-2616c9c0e8d3?w=300&h=400&fit=crop&crop=face",
                    description: "Trần Bảo Ngọc, cô nàng xinh đẹp và thông minh, được mệnh danh là nữ thần của trường. Nhưng đằng sau vẻ ngoài hoàn hảo ấy là những câu chuyện hài hước...",
                    featured: false,
                    lastUpdate: new Date('2024-01-10T09:30:00Z')
                }
            ],
            categories: [
                { name: "Ngôn tình", count: 4 },
                { name: "Kiếm hiệp", count: 3 },
                { name: "Trinh thám", count: 2 },
                { name: "Teen", count: 3 },
                { name: "Cổ trang", count: 2 }
            ]
        };

        // Utility functions
        function formatNumber(num) {
            if (num >= 1000000) {
                return (num / 1000000).toFixed(1) + 'M';
            } else if (num >= 1000) {
                return (num / 1000).toFixed(1) + 'K';
            }
            return num.toString();
        }

        function getRelativeTime(date) {
            const now = new Date();
            const diffInHours = Math.floor((now - date) / (1000 * 60 * 60));

            if (diffInHours < 1) return 'Vừa xong';
            if (diffInHours < 24) return `${diffInHours} giờ trước`;

            const diffInDays = Math.floor(diffInHours / 24);
            if (diffInDays < 7) return `${diffInDays} ngày trước`;

            const diffInWeeks = Math.floor(diffInDays / 7);
            if (diffInWeeks < 4) return `${diffInWeeks} tuần trước`;

            const diffInMonths = Math.floor(diffInDays / 30);
            return `${diffInMonths} tháng trước`;
        }

        // Theme management
        let currentTheme = 'light';

        function toggleTheme() {
            currentTheme = currentTheme === 'light' ? 'dark' : 'light';
            document.body.setAttribute('data-theme', currentTheme);
            localStorage.setItem('blog-theme', currentTheme);
            updateThemeIcon();

            // Smooth transition
            document.body.style.transition = 'background-color 0.3s ease, color 0.3s ease';
            setTimeout(() => document.body.style.transition = '', 300);
        }

        function updateThemeIcon() {
            const themeIcons = document.querySelectorAll('.theme-toggle i');
            themeIcons.forEach(icon => {
                icon.className = currentTheme === 'dark' ? 'fas fa-sun' : 'fas fa-moon';
            });
        }

        function initTheme() {
            const savedTheme = localStorage.getItem('blog-theme') || 'light';
            currentTheme = savedTheme;
            document.body.setAttribute('data-theme', currentTheme);
            updateThemeIcon();
        }

        // Populate demo data
        function populateStories() {
            const container = document.querySelector('.stories-grid');
            if (!container) return;

            const html = demoData.stories.map(story => `
                <article class="story-card">
                    <div class="story-thumbnail">
                        <img src="${story.cover}" alt="${story.title}" loading="lazy">
                        <div class="story-overlay">
                            <div class="story-status">
                                ${story.genre.map(g => `<span class="status-badge">${g}</span>`).join('')}
                            </div>
                        </div>
                    </div>
                    <div class="story-info">
                        <h3 class="story-title">
                            <a href="#" onclick="StoryNavigation.goToStory(${story.id}); return false;" title="${story.title}">${story.title}</a>
                        </h3>
                        <p class="story-author">
                            <i class="fas fa-user"></i>
                            <span>${story.author}</span>
                        </p>
                        <p class="story-excerpt">${story.description.substring(0, 100)}...</p>
                        <div class="story-meta">
                            <!-- Chapter count hidden for simplified demo -->
                            <!-- <span class="chapter-count">
                                <i class="fas fa-book"></i>
                                <span class="chapter-number">${story.chapters}</span> chương
                            </span> -->
                            <span class="update-time">
                                <i class="fas fa-calendar"></i>
                                ${getRelativeTime(story.lastUpdate)}
                            </span>
                            <span class="view-count">
                                <i class="fas fa-eye"></i>
                                <span class="view-number">${formatNumber(story.views)}</span> lượt xem
                            </span>
                        </div>
                        <div class="story-actions">
                            <a href="#" onclick="StoryNavigation.goToReader(${story.id}); return false;" class="read-btn">
                                <i class="fas fa-book-open"></i>
                                Đọc ngay
                            </a>
                            <button class="bookmark-btn" data-story-id="${story.id}">
                                <i class="far fa-bookmark"></i>
                            </button>
                        </div>
                    </div>
                </article>
            `).join('');

            container.innerHTML = html;
        }

        function populatePopularStories() {
            const container = document.querySelector('.popular-list');
            if (!container) return;

            const popularStories = [...demoData.stories]
                .sort((a, b) => b.views - a.views)
                .slice(0, 5);

            const html = popularStories.map((story, index) => `
                <div class="popular-item">
                    <div class="popular-rank">${index + 1}</div>
                    <div class="popular-info">
                        <h4 class="popular-title">
                            <a href="#" onclick="StoryNavigation.goToStory(${story.id}); return false;">${story.title}</a>
                        </h4>
                        <p class="popular-meta">${formatNumber(story.views)} lượt xem</p>
                    </div>
                </div>
            `).join('');

            container.innerHTML = html;
        }

        function populateCategories() {
            const container = document.querySelector('.categories-list');
            if (!container) return;

            const html = demoData.categories.map(category => `
                <a class="category-tag" href="#" onclick="StoryNavigation.goToCategory('${category.name}'); return false;">
                    ${category.name}
                    <span class="category-count">(${category.count})</span>
                </a>
            `).join('');

            container.innerHTML = html;
        }

        // Reader functionality
        function initReaderControls() {
            const fontButtons = document.querySelectorAll('.font-size-btn');
            const chapterContent = document.querySelector('.chapter-content');

            if (!chapterContent || fontButtons.length === 0) return;

            fontButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const size = button.dataset.size;

                    // Remove existing font size classes
                    chapterContent.classList.remove('font-small', 'font-medium', 'font-large');

                    // Add new font size class
                    chapterContent.classList.add(`font-${size}`);

                    // Update active state
                    fontButtons.forEach(btn => btn.classList.remove('active'));
                    button.classList.add('active');
                });
            });
        }

        // Back to top functionality
        function initBackToTop() {
            const backToTop = document.querySelector('.back-to-top');
            if (!backToTop) return;

            window.addEventListener('scroll', () => {
                const scrollTop = window.pageYOffset || document.documentElement.scrollTop;

                if (scrollTop > 500) {
                    backToTop.classList.add('visible');
                } else {
                    backToTop.classList.remove('visible');
                }
            });

            backToTop.addEventListener('click', () => {
                window.scrollTo({
                    top: 0,
                    behavior: 'smooth'
                });
            });
        }
    </script>
    
    <script>
        // Initialize everything when DOM is ready
        document.addEventListener('DOMContentLoaded', function() {
            initTheme();
            populateStories();
            populatePopularStories();
            populateCategories();
            initReaderControls();
            initBackToTop();
            loadStoryDetailContent();
            initializeHeaderNavigation();
        });

        // Initialize header navigation
        function initializeHeaderNavigation() {
            // Handle URL-based navigation on page load
            const params = URLUtils.getParams();
            if (params.page && params.page !== 'homepage') {
                showSection(params.page);
            } else {
                showSection('homepage');
            }
        }

        // Load story detail content (inline HTML to avoid fetch issues)
        function loadStoryDetailContent() {
            const storyDetailHTML = `
                <div class="story-detail-page">
                    <!-- Breadcrumb -->
                    <nav class="breadcrumb">
                        <a href="#" onclick="StoryNavigation.showHomepage(); return false;">Trang chủ</a>
                        <span class="breadcrumb-separator">/</span>
                        <a href="#" onclick="StoryNavigation.goToCategory('Ngôn tình'); return false;">Ngôn tình</a>
                        <span class="breadcrumb-separator">/</span>
                        <span class="current-page">Tổng Giám Đốc Lạnh Lùng</span>
                    </nav>

                    <!-- Audio Player -->
                    <div class="audio-player-container">
                        <div class="audio-player" id="storyAudioPlayer">
                            <!-- Audio Information -->
                            <div class="audio-info">
                                <div class="audio-title">
                                    <h3 class="track-title">Tổng Giám Đốc Lạnh Lùng - Chương 1</h3>
                                    <p class="track-subtitle">Cuộc gặp gỡ định mệnh</p>
                                </div>
                                <div class="audio-duration">
                                    <span class="current-time">00:00</span>
                                    <span class="duration-separator">/</span>
                                    <span class="total-duration">70:57</span>
                                </div>
                            </div>

                            <!-- Progress Bar -->
                            <div class="progress-container">
                                <div class="progress-bar" id="progressBar">
                                    <div class="progress-fill" id="progressFill"></div>
                                    <div class="progress-handle" id="progressHandle"></div>
                                </div>
                            </div>

                            <!-- Main Controls -->
                            <div class="audio-controls">
                                <div class="primary-controls">
                                    <button class="control-btn previous-btn" id="previousBtn" title="Chương trước">
                                        <i class="fas fa-step-backward"></i>
                                    </button>
                                    <button class="control-btn rewind-btn" id="rewindBtn" title="Tua lại 10s">
                                        <i class="fas fa-undo"></i>
                                    </button>
                                    <button class="control-btn play-pause-btn" id="playPauseBtn" title="Phát/Tạm dừng">
                                        <i class="fas fa-play"></i>
                                    </button>
                                    <button class="control-btn next-btn" id="nextBtn" title="Chương sau">
                                        <i class="fas fa-step-forward"></i>
                                    </button>
                                    <button class="control-btn repeat-btn" id="repeatBtn" title="Lặp lại">
                                        <i class="fas fa-redo"></i>
                                    </button>
                                </div>

                                <div class="secondary-controls">
                                    <!-- Volume Control -->
                                    <div class="volume-control">
                                        <button class="control-btn volume-btn" id="volumeBtn" title="Âm lượng">
                                            <i class="fas fa-volume-up"></i>
                                        </button>
                                        <div class="volume-slider-container">
                                            <input type="range" class="volume-slider" id="volumeSlider" min="0" max="100" value="70">
                                        </div>
                                    </div>

                                    <!-- Speed Control -->
                                    <div class="speed-control">
                                        <button class="control-btn speed-btn" id="speedBtn" title="Tốc độ phát">
                                            <span class="speed-text">1x</span>
                                        </button>
                                        <div class="speed-menu" id="speedMenu">
                                            <button class="speed-option" data-speed="0.75">0.75x</button>
                                            <button class="speed-option active" data-speed="1">1x</button>
                                            <button class="speed-option" data-speed="1.25">1.25x</button>
                                            <button class="speed-option" data-speed="1.5">1.5x</button>
                                            <button class="speed-option" data-speed="2">2x</button>
                                        </div>
                                    </div>

                                    <!-- Playlist Toggle -->
                                    <button class="control-btn playlist-btn" id="playlistBtn" title="Danh sách phát">
                                        <i class="fas fa-list"></i>
                                    </button>
                                </div>
                            </div>

                            <!-- Hidden Audio Element -->
                            <audio id="audioElement" preload="metadata">
                                <source src="./audio/Tổng Giám Đốc Lạnh Lùng Và Cô Vợ Nhỏ.mp3" type="audio/mpeg">
                                Your browser does not support the audio element.
                            </audio>
                        </div>
                    </div>

                    <!-- Story Info Section -->
                    <div class="story-info-section">
                        <div class="story-cover">
                            <img src="https://images.unsplash.com/photo-1573496359142-b8d87734a5a2?w=300&h=400&fit=crop&crop=face" alt="Bìa truyện" class="cover-image">
                            <div class="cover-overlay">
                                <div class="rating-stars">
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="far fa-star"></i>
                                    <span class="rating-text">4.5/5 (156 đánh giá)</span>
                                </div>
                            </div>
                        </div>

                        <div class="story-details">
                            <h1 class="story-title">Tổng Giám Đốc Lạnh Lùng Và Cô Vợ Nhỏ</h1>

                            <div class="story-meta">
                                <div class="meta-item">
                                    <i class="fas fa-user"></i>
                                    <span class="meta-label">Tác giả:</span>
                                    <a href="#" class="meta-value author-link">Minh Nguyệt</a>
                                </div>

                                <div class="meta-item">
                                    <i class="fas fa-tags"></i>
                                    <span class="meta-label">Thể loại:</span>
                                    <div class="genre-tags">
                                        <a href="#" class="genre-tag">Ngôn tình</a>
                                        <a href="#" class="genre-tag">Hiện đại</a>
                                        <a href="#" class="genre-tag">Tổng giám đốc</a>
                                    </div>
                                </div>

                                <div class="meta-item">
                                    <i class="fas fa-info-circle"></i>
                                    <span class="meta-label">Trạng thái:</span>
                                    <span class="meta-value status-ongoing">Đang cập nhật</span>
                                </div>

                                <!-- Chapter count hidden for simplified demo -->
                                <!-- <div class="meta-item">
                                    <i class="fas fa-book"></i>
                                    <span class="meta-label">Số chương:</span>
                                    <span class="meta-value">25 chương</span>
                                </div> -->

                                <div class="meta-item">
                                    <i class="fas fa-eye"></i>
                                    <span class="meta-label">Lượt xem:</span>
                                    <span class="meta-value">15.2K lượt xem</span>
                                </div>

                                <div class="meta-item">
                                    <i class="fas fa-calendar"></i>
                                    <span class="meta-label">Cập nhật:</span>
                                    <span class="meta-value">2 giờ trước</span>
                                </div>
                            </div>

                            <!-- Action Buttons -->
                            <div class="story-actions">
                                <!-- Latest chapter button hidden for single chapter demo -->
                                <!-- <a href="#" onclick="StoryNavigation.goToReader(1, 25); return false;" class="action-btn secondary read-latest">
                                    <i class="fas fa-forward"></i>
                                    Đọc chương mới nhất
                                </a> -->
                                <button class="action-btn outline bookmark-story">
                                    <i class="far fa-bookmark"></i>
                                    Theo dõi
                                </button>
                                <button class="action-btn outline share-story">
                                    <i class="fas fa-share"></i>
                                    Chia sẻ
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Story Description -->
                    <div class="story-description">
                        <h2 class="section-title">
                            <i class="fas fa-align-left"></i>
                            Mô tả truyện
                        </h2>
                        <div class="description-content">
                            <div class="description-text">
                                <p>Lâm Tiểu Hy, một cô gái bình thường, bất ngờ được sắp xếp kết hôn với Lý Hàn Thần - tổng giám đốc lạnh lùng và quyền lực nhất thành phố. Cuộc hôn nhân ban đầu chỉ là thỏa thuận, nhưng dần dần, tình yêu đã nảy sinh giữa hai người.</p>
                                <p>Với tính cách mạnh mẽ và độc lập, Tiểu Hy không dễ dàng khuất phục trước sự lạnh lùng của Hàn Thần. Còn anh, dù cố gắng giữ khoảng cách, nhưng lại không thể không bị thu hút bởi sự trong sáng và kiên cường của cô.</p>
                                <p>Liệu tình yêu có thể tan chảy trái tim băng giá của tổng giám đốc? Và liệu Tiểu Hy có thể vượt qua những thử thách để giành được hạnh phúc?</p>
                            </div>
                        </div>
                    </div>

                    <!-- Chapter List - Hidden for simplified demo -->
                    <!-- <div class="chapter-list-section">
                        <div class="section-header">
                            <h2 class="section-title">
                                <i class="fas fa-list"></i>
                                Danh sách chương
                                <span class="chapter-count">(25 chương)</span>
                            </h2>
                        </div>

                        <div class="chapter-list">
                            <div class="chapter-item">
                                <div class="chapter-number">1</div>
                                <div class="chapter-info">
                                    <h3 class="chapter-title">
                                        <a href="#" onclick="StoryNavigation.goToReader(1, 1); return false;">Chương 1: Cuộc gặp gỡ định mệnh</a>
                                    </h3>
                                    <div class="chapter-meta">
                                        <span class="chapter-date">3 ngày trước</span>
                                        <span class="chapter-views">1.2K lượt xem</span>
                                    </div>
                                </div>
                                <div class="chapter-status">
                                    <i class="fas fa-check-circle read-status"></i>
                                </div>
                            </div>

                            <div class="chapter-item">
                                <div class="chapter-number">2</div>
                                <div class="chapter-info">
                                    <h3 class="chapter-title">
                                        <a href="#">Chương 2: Thỏa thuận bất ngờ</a>
                                    </h3>
                                    <div class="chapter-meta">
                                        <span class="chapter-date">2 ngày trước</span>
                                        <span class="chapter-views">980 lượt xem</span>
                                    </div>
                                </div>
                                <div class="chapter-status">
                                    <i class="far fa-circle read-status"></i>
                                </div>
                            </div>

                            <div class="chapter-item">
                                <div class="chapter-number">3</div>
                                <div class="chapter-info">
                                    <h3 class="chapter-title">
                                        <a href="#" onclick="StoryNavigation.goToReader(1, 3); return false;">Chương 3: Ngày đầu làm vợ giả</a>
                                    </h3>
                                    <div class="chapter-meta">
                                        <span class="chapter-date">1 ngày trước</span>
                                        <span class="chapter-views">856 lượt xem</span>
                                    </div>
                                </div>
                                <div class="chapter-status">
                                    <i class="far fa-circle read-status"></i>
                                </div>
                            </div>
                        </div>
                    </div> -->
                </div>
            `;

            const container = document.getElementById('story-detail-content');
            if (container) {
                container.innerHTML = storyDetailHTML;
                // Initialize audio player after HTML is loaded
                setTimeout(initAudioPlayer, 100);
            }
        }

        // Make toggleTheme global
        window.toggleTheme = toggleTheme;

        // Additional navigation functions
        function filterByStatus(status) {
            let filteredStories = [];
            let title = '';

            if (status === 'completed') {
                filteredStories = demoData.stories.filter(story => story.status === 'Hoàn thành');
                title = 'Truyện đã hoàn thành';
            } else if (status === 'updating') {
                filteredStories = demoData.stories.filter(story => story.status === 'Đang cập nhật');
                title = 'Truyện đang cập nhật';
            }

            // Show homepage and update grid
            StoryNavigation.showHomepage();
            StoryNavigation.updateStoriesGrid(filteredStories, title);
        }

        function navigateChapter(direction) {
            // Since we only have one chapter per story, disable navigation
            console.log('Chapter navigation disabled - only one chapter per story in demo');

            // Update button states to show they're disabled
            const prevBtn = document.querySelector('.prev-btn');
            const nextBtn = document.querySelector('.next-btn');

            if (prevBtn) {
                prevBtn.disabled = true;
                prevBtn.title = 'Không có chương trước';
            }

            if (nextBtn) {
                nextBtn.disabled = true;
                nextBtn.title = 'Không có chương sau';
            }
        }

        function updateChapterNavigationButtons(storyId, currentChapter, availableChapters) {
            const prevBtn = document.querySelector('.prev-btn');
            const nextBtn = document.querySelector('.next-btn');

            // Since we only have one chapter per story, always disable both buttons
            if (prevBtn) {
                prevBtn.disabled = true;
                prevBtn.title = 'Không có chương trước';
            }

            if (nextBtn) {
                nextBtn.disabled = true;
                nextBtn.title = 'Không có chương sau';
            }
        }

        // Audio Player Functionality
        function initAudioPlayer() {
            const audioPlayer = document.getElementById('storyAudioPlayer');
            const audioElement = document.getElementById('audioElement');
            const playPauseBtn = document.getElementById('playPauseBtn');
            const previousBtn = document.getElementById('previousBtn');
            const nextBtn = document.getElementById('nextBtn');
            const rewindBtn = document.getElementById('rewindBtn');
            const repeatBtn = document.getElementById('repeatBtn');
            const progressBar = document.getElementById('progressBar');
            const progressFill = document.getElementById('progressFill');
            const progressHandle = document.getElementById('progressHandle');
            const currentTimeDisplay = document.querySelector('.current-time');
            const totalDurationDisplay = document.querySelector('.total-duration');
            const volumeBtn = document.getElementById('volumeBtn');
            const volumeSlider = document.getElementById('volumeSlider');
            const speedBtn = document.getElementById('speedBtn');
            const speedOptions = document.querySelectorAll('.speed-option');
            const playlistBtn = document.getElementById('playlistBtn');

            if (!audioPlayer || !audioElement) return;

            // Audio player state
            let isPlaying = false;
            let volume = 0.7;
            let playbackRate = 1;
            let isRepeating = false;
            let isDragging = false;

            // Initialize audio
            audioElement.volume = volume;
            audioElement.playbackRate = playbackRate;
            audioElement.loop = false;

            // Set up audio event listeners
            audioElement.addEventListener('loadedmetadata', () => {
                totalDurationDisplay.textContent = formatTime(audioElement.duration);
            });

            audioElement.addEventListener('timeupdate', () => {
                if (!isDragging) {
                    updateProgress();
                }
            });

            audioElement.addEventListener('ended', () => {
                if (isRepeating) {
                    audioElement.currentTime = 0;
                    audioElement.play();
                } else {
                    pauseAudio();
                }
            });

            // Format time helper
            function formatTime(seconds) {
                const mins = Math.floor(seconds / 60);
                const secs = Math.floor(seconds % 60);
                return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
            }

            // Update progress bar
            function updateProgress() {
                if (!isDragging && audioElement.duration > 0) {
                    const progress = (audioElement.currentTime / audioElement.duration) * 100;
                    progressFill.style.width = `${progress}%`;
                    progressHandle.style.left = `${progress}%`;
                }
                currentTimeDisplay.textContent = formatTime(audioElement.currentTime || 0);
            }

            // Play/Pause functionality
            playPauseBtn.addEventListener('click', () => {
                if (isPlaying) {
                    pauseAudio();
                } else {
                    playAudio();
                }
            });

            function playAudio() {
                const playPromise = audioElement.play();

                if (playPromise !== undefined) {
                    playPromise.then(() => {
                        isPlaying = true;
                        playPauseBtn.querySelector('i').className = 'fas fa-pause';
                    }).catch(error => {
                        console.log('Audio play failed:', error);
                        // Fallback to simulated playback if real audio fails
                        startSimulatedPlayback();
                    });
                }
            }

            function pauseAudio() {
                audioElement.pause();
                isPlaying = false;
                playPauseBtn.querySelector('i').className = 'fas fa-play';
            }

            // Fallback simulated playback for demo purposes
            function startSimulatedPlayback() {
                isPlaying = true;
                playPauseBtn.querySelector('i').className = 'fas fa-pause';

                // Set simulated duration
                if (!audioElement.duration) {
                    const simulatedDuration = 70 * 60 + 57; // 70:57
                    totalDurationDisplay.textContent = formatTime(simulatedDuration);

                    // Create simulated timeupdate events
                    const simulateProgress = () => {
                        if (isPlaying && audioElement.currentTime < simulatedDuration) {
                            audioElement.currentTime = (audioElement.currentTime || 0) + 1;
                            updateProgress();
                            setTimeout(simulateProgress, 1000);
                        } else if (audioElement.currentTime >= simulatedDuration) {
                            if (isRepeating) {
                                audioElement.currentTime = 0;
                                simulateProgress();
                            } else {
                                pauseAudio();
                            }
                        }
                    };
                    simulateProgress();
                }
            }

            // Previous track
            previousBtn.addEventListener('click', () => {
                console.log('Previous track - Demo functionality');
                audioElement.currentTime = 0;
                updateProgress();
                // If playing, restart playback from beginning
                if (isPlaying) {
                    playAudio();
                }
            });

            // Next track
            nextBtn.addEventListener('click', () => {
                console.log('Next track - Demo functionality');
                audioElement.currentTime = 0;
                updateProgress();
                // If playing, restart playback from beginning
                if (isPlaying) {
                    playAudio();
                }
            });

            // Rewind 10 seconds
            rewindBtn.addEventListener('click', () => {
                audioElement.currentTime = Math.max(0, audioElement.currentTime - 10);
                updateProgress();
            });

            // Repeat toggle
            repeatBtn.addEventListener('click', () => {
                isRepeating = !isRepeating;
                audioElement.loop = isRepeating;
                repeatBtn.style.color = isRepeating ? '#667eea' : 'rgba(255, 255, 255, 0.8)';
            });

            // Progress bar interaction
            progressBar.addEventListener('mousedown', (e) => {
                isDragging = true;
                updateProgressFromMouse(e);
            });

            progressBar.addEventListener('mousemove', (e) => {
                if (isDragging) {
                    updateProgressFromMouse(e);
                }
            });

            document.addEventListener('mouseup', () => {
                isDragging = false;
            });

            function updateProgressFromMouse(e) {
                const rect = progressBar.getBoundingClientRect();
                const percent = Math.max(0, Math.min(1, (e.clientX - rect.left) / rect.width));

                if (audioElement.duration) {
                    audioElement.currentTime = percent * audioElement.duration;
                    updateProgress();
                }
            }

            // Volume control
            volumeSlider.addEventListener('input', (e) => {
                volume = e.target.value / 100;
                audioElement.volume = volume;
                updateVolumeIcon();
            });

            function updateVolumeIcon() {
                const icon = volumeBtn.querySelector('i');
                if (volume === 0) {
                    icon.className = 'fas fa-volume-mute';
                } else if (volume < 0.5) {
                    icon.className = 'fas fa-volume-down';
                } else {
                    icon.className = 'fas fa-volume-up';
                }
            }

            volumeBtn.addEventListener('click', () => {
                if (volume > 0) {
                    volumeSlider.value = 0;
                    volume = 0;
                } else {
                    volumeSlider.value = 70;
                    volume = 0.7;
                }
                audioElement.volume = volume;
                updateVolumeIcon();
            });

            // Speed control
            speedOptions.forEach(option => {
                option.addEventListener('click', () => {
                    speedOptions.forEach(opt => opt.classList.remove('active'));
                    option.classList.add('active');

                    playbackRate = parseFloat(option.dataset.speed);
                    audioElement.playbackRate = playbackRate;
                    speedBtn.querySelector('.speed-text').textContent = `${playbackRate}x`;
                });
            });

            // Playlist toggle
            playlistBtn.addEventListener('click', () => {
                console.log('Playlist toggle - Demo functionality');
                alert('Tính năng danh sách phát sẽ được phát triển trong phiên bản tiếp theo!');
            });

            // Handle audio element events
            audioElement.addEventListener('pause', () => {
                isPlaying = false;
                playPauseBtn.querySelector('i').className = 'fas fa-play';
            });

            audioElement.addEventListener('play', () => {
                isPlaying = true;
                playPauseBtn.querySelector('i').className = 'fas fa-pause';
            });

            audioElement.addEventListener('error', (e) => {
                console.log('Audio error:', e);
                // Fallback to simulated playback
                totalDurationDisplay.textContent = '70:57';
            });

            // Initialize volume icon
            updateVolumeIcon();

            // Cleanup function to prevent memory leaks
            window.audioPlayerCleanup = function() {
                audioElement.pause();
                audioElement.currentTime = 0;
                isPlaying = false;
                playPauseBtn.querySelector('i').className = 'fas fa-play';
            };
        }

        // Initialize audio player when page loads
        document.addEventListener('DOMContentLoaded', () => {
            // Add a small delay to ensure the player is rendered
            setTimeout(initAudioPlayer, 100);
        });

        // Make functions globally available
        window.filterByStatus = filterByStatus;
        window.navigateChapter = navigateChapter;
    </script>
</body>
</html>
